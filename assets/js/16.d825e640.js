(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{485:function(t,e,s){"use strict";s.r(e);var a=s(24),r=Object(a.a)({},(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("p",[t._v("写这个批处理的目的，是为了方便将Vuepress打包好的dist文件夹的文件，复制到我指定的另外一个文件夹内。\n写了这么一个批处理，所以简单的记录一下实现方法。")]),t._v(" "),s("h2",{attrs:{id:"目录结构"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#目录结构"}},[t._v("#")]),t._v(" 目录结构")]),t._v(" "),s("p",[t._v("首先来看一下两个文件夹下的文件，左边是dist目录下编译好的文件。右边是我需要复制到的文件夹下的文件")]),t._v(" "),s("div",{staticStyle:{"text-align":"center",display:"flex","align-items":"center","justify-content":"space-evenly"}},[s("img",{staticClass:"pageimg",attrs:{src:t.$withBase("/assets/img/0521/0.png"),alt:"图片"}}),t._v(" "),s("img",{staticClass:"pageimg",attrs:{src:t.$withBase("/assets/img/0521/1.png"),alt:"图片"}})]),t._v(" "),s("h2",{attrs:{id:"删除文件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#删除文件"}},[t._v("#")]),t._v(" 删除文件")]),t._v(" "),s("p",[t._v("复制之前，需要做的是删除原来的文件，因为我发现，每次编译后的css文件和js文件的文件名会变，直接复制dist\n目录下的文件过去，之前的css和js文件还是会在，可是又不会再用了，所以干脆直接全删了。但是文件夹里还有些我自己添加的文件，\n比如 "),s("code",[t._v("README.md")]),t._v(" ，所以还需要排除指定的文件。")]),t._v(" "),s("h3",{attrs:{id:"排除文件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#排除文件"}},[t._v("#")]),t._v(" 排除文件")]),t._v(" "),s("p",[t._v("使用 "),s("code",[t._v("dir")]),t._v(" 命令来获取文件和文件夹列表")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v('// 获取文件夹列表\ndir /ad /b | findstr /i /v ".git" > folders.txt\n\n// 获取文件列表\ndir /a-d /b | findstr /i /v "README.md .txt .bat google49dbd47831accd61.html .gitignore" > files.txt\n')])])]),s("p",[t._v("命令中参数的含义：")]),t._v(" "),s("p",[s("code",[t._v("/ad")]),t._v("：只显示目录属性的文件名"),s("br"),t._v(" "),s("code",[t._v("/b")]),t._v("：只显示文件名"),s("br"),t._v(" "),s("code",[t._v("/i")]),t._v("：忽略大小写"),s("br"),t._v(" "),s("code",[t._v("/v")]),t._v("：只显示不包含匹配的行"),s("br"),t._v(" "),s("code",[t._v("/a-d")]),t._v("：只显示不是目录属性的文件名"),s("br"),t._v(" "),s("code",[t._v("> folders.txt")]),t._v("：将筛选出的文件名保存到folders.txt文件中")]),t._v(" "),s("h3",{attrs:{id:"删除文件夹"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#删除文件夹"}},[t._v("#")]),t._v(" 删除文件夹")]),t._v(" "),s("p",[t._v("删除文件夹，使用的是 "),s("code",[t._v("rd")]),t._v(" 命令，使用for循环读取folders.txt中的文件夹名，并删除")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("set folder=''\nfor /f %%i in (folders.txt) do (\n    set folder=%%i\n    rd /s /q !folder!\n    echo ·删除 !folder!\n)\n")])])]),s("p",[t._v("命令 "),s("code",[t._v("rd")]),t._v(" 参数的含义：")]),t._v(" "),s("p",[s("code",[t._v("/s")]),t._v("：除目录本身外，还将删除指定目录下的所有子目录和文件。用于删除目录树。"),s("br"),t._v(" "),s("code",[t._v("/q")]),t._v("：安静模式，带 /S 删除目录树时不要求确认")]),t._v(" "),s("h3",{attrs:{id:"删除文件-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#删除文件-2"}},[t._v("#")]),t._v(" 删除文件")]),t._v(" "),s("p",[t._v("删除文件，使用的是 "),s("code",[t._v("del")]),t._v(" 命令，使用for循环读取files.txt中的文件夹名，并删除")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("set file=''\nfor /f %%j in (files.txt) do (\n    set file=%%j\n    del !file!\n    echo ·删除 !file!\n)\n\n// 最后再删除 folders.txt 和 files.txt 文件\ndel folders.txt\ndel files.txt\n")])])]),s("h2",{attrs:{id:"复制文件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#复制文件"}},[t._v("#")]),t._v(" 复制文件")]),t._v(" "),s("p",[t._v("复制文件，使用的是 "),s("code",[t._v("xcopy")]),t._v(" 命令")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v('xcopy /e "<路径>" "<路径>"\n')])])]),s("h2",{attrs:{id:"最终的脚本"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#最终的脚本"}},[t._v("#")]),t._v(" 最终的脚本")]),t._v(" "),s("p",[t._v("注意脚本中的 "),s("code",[t._v("SETLOCAL ENABLEDELAYEDEXPANSION")]),t._v(" ，在for循环中，当一个变量被多次赋值时，%%所获取的仅仅是第一次被赋予的值；要想刷新的值，就必须首先通过命令 "),s("code",[t._v("SETLOCAL ENABLEDELAYEDEXPANSION")]),t._v(" 来开启延迟变量开关，然后用!!来获取值")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v('@echo off\nSETLOCAL ENABLEDELAYEDEXPANSION\n\ndir /ad /b | findstr /i /v ".git" > folders.txt\ndir /a-d /b | findstr /i /v "README.md .txt .bat google49dbd47831accd61.html .gitignore" > files.txt\nset folder=\'\'\nfor /f %%i in (folders.txt) do (\n    set folder=%%i\n    rd /s /q !folder!\n    echo ·删除 !folder!\n)\nset file=\'\'\nfor /f %%j in (files.txt) do (\n    set file=%%j\n    del !file!\n    echo ·删除 !file!\n)\ndel folders.txt\ndel files.txt\necho ·开始复制文件...\nxcopy /e "D:\\Git\\workspace\\Vuepress-Blog\\docs\\.vuepress\\dist" "D:\\Git\\workspace\\billsaul"\n\npause\n')])])])])}),[],!1,null,null,null);e.default=r.exports}}]);